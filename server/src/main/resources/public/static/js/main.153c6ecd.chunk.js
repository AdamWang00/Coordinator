(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{22:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n(1),i=n.n(r),a=n(23),s=n.n(a),c=(n(29),n(30),n(6)),l=(n(31),"http://coordinator.adamwang.me"),u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=96,p=.5,g=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p;return"rgba("+e+", "+t+", "+n+", "+o+")"};var m=function(e){var t=Math.floor(e/60),n=e%60;return(t?t+"h ":"")+(n?n+"min":"")},h=function(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t},b=function(e,t,n){return"#"+h(e)+h(t)+h(n)},f=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,n=f(e);return g(n.r,n.g,n.b,t)},O=function(e){return{headers:{"Content-Type":"application/json",Authorization:e}}},v=function(e){return e+1},x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"Enter"===t.key&&(e(t),n&&setTimeout((function(){return document.getElementById(n).focus()}),0))},T="color: yellowgreen",y=function(e,t,n){return"Hey, that "+n+" is way too short! Please provide one above "+t+" characters (current: "+e+")."},C=function(e,t,n){return"Hey, that "+n+" is way too long! Please stay under "+t+" characters (current: "+e+")."},S=function e(t){return t.map((function(t){return Array.isArray(t)?e(t):t}))},w=function(e){return e[0].map((function(t,n){return e.map((function(e){return e[n]}))}))},N=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(t?-1:1)*(new Date).getTimezoneOffset()/60*4;return[].concat(Object(c.a)(e.slice(n)),Object(c.a)(e.slice(0,n)))},k=function(e){if(672!==e.length)return console.error("Bad vector size!"),null;for(var t=[],n=0;n<7;n++)t.push(e.slice(d*n,d*(n+1)));return w(t)},E=function(e){return[e%d,Math.floor(e/d)]},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=Math.floor(e/d)%7,r=e%d,i=u[o].slice(0,3),a=Math.floor(r/4),s=(a%12?a%12:12).toString(),c=" "+(a<12?"am":"pm"),l=(r%4*15).toString();l.length<2&&(l="0"+l);var p=(i===n?"":i)+" "+s+":"+l+c;return t?[p,i]:p},I=function(e,t){var n=M(e,!0),r=Object(o.a)(n,2),i=r[0],a=r[1];return i+" to "+M(t+1,!1,a)},G=n(3),B=n.n(G),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9999;return Math.floor(Math.random()*(t-e+1))+e},D=n(0),L={width:100/7+"%"},H=function(e){return navigator.userAgent.indexOf("Chrome")>-1?Math.round(e):e},R=function(e,t,n){var o=S(e.table),r=e.row,i=e.col;r>t&&(r=t,t=e.row),i>n&&(i=n,n=e.col);for(var a=r;a<=t;a++)for(var s=i;s<=n;s++)o[a][s]=e.setTo;return o},A=function(e,t){return"row"+e+"col"+t},W=function(e,t){var n=e.times,o=e.pinnedTimes,r=e.highlightedTime,a=document.getElementById("ScheduleEditorTable");if(a){var s=a.getBoundingClientRect(),c=s.height,l=-s.top,u=-s.left,d=[];r&&F(d,r,c,l,u,"highlighted");for(var p=0;p<n.length;p++)F(d,n[p],c,l,u);for(var g=0;g<o.length;g++)F(d,o[g],c,l,u,"pinnedBorder"),F(d,o[g],c,l,u,"pinned");return Object(D.jsx)(i.a.Fragment,{children:d.map((function(e,t){return Object(D.jsx)("div",{className:"SEOverlay hasTooltip"+e.extraClass,"data-tooltip":e.extraTooltip,style:e.extraStyle},t)}))})}},F=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=t.startIndex,c=t.endIndex,l=t.groupName,u=t.rgb,d=E(s),g=Object(o.a)(d,2),m=g[0],h=g[1],b=E(c),f=Object(o.a)(b,2),O=f[0],v=f[1],x=document.getElementById(A(O,v%7));if(x)for(var T=x.getBoundingClientRect(),y="pinned"===a?1:p,C=j(u,y),S=h;S<=v;S++){var w=S===h?document.getElementById(A(m,h%7)):document.getElementById(A(0,S%7));if(null!==w){var N=w.getBoundingClientRect(),k=S===v?T.top+T.height-N.top:n-N.top-r,M={extraClass:" "+a,extraTooltip:'Meeting time for "'+l+'"',extraStyle:{top:N.top+r-.5+"px",left:H(N.left+i-.5)+"px",height:k+1+"px",width:w.getBoundingClientRect().width+1+"px",backgroundColor:"highlighted"===a||"pinnedBorder"===a?"transparent":C}};e.push(M)}else console.error("BAD!! appendSEOverlayDivStyle screwed up"),console.log("j",S,"startI",m,"startJ",h)}};var U=function(e){var t,n,i=e.loginToken,a=e.selectedTimes,s=Object(r.useState)(!0),p=Object(o.a)(s,2),g=p[0],m=p[1],h=Object(r.useState)(0),b=Object(o.a)(h,2),f=(b[0],b[1]),j=Object(r.useState)(null),v=Object(o.a)(j,2),x=v[0],y=v[1],C=Object(r.useState)(null),E=Object(o.a)(C,2),M=E[0],I=E[1],G=-(new Date).getTimezoneOffset()/60,P=Object(r.useCallback)((function(e){e.preventDefault(),!g&&M&&(e.target===document||document.getElementById("ScheduleEditorInner").contains(e.target))&&I(null)}),[g,M,I]),H=Object(r.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||!document.getElementById("ScheduleEditorInner").contains(e.target))if(M)I(null);else if(e.stopPropagation(),m(t),t!==g){var n=function e(t){t>20||(f(t),setTimeout((function(){return e(t+1)}),25))};n(0)}}),[g,M]),F=(t=function(e,t){var n=t.row,o=t.col,r=n,i=o;switch(e){case"start":r=0,i=0;break;case"end":r=95,i=6;break;case"up":r=(n-1+d)%d;break;case"down":r=(n+1)%d;break;case"left":i=(o-1+7)%7;break;case"right":i=(o+1)%7;break;default:return}document.getElementById(A(r,i))?document.getElementById(A(r,i)).focus():console.log("Error in traverseCell: "+n+", "+o+" -"+e+"-> "+r+", "+i)},function(e){return function(n){return t(e,n)}}),U=function(e){var t=e.row,n=e.col;if(M)I(null);else{var o={row:t,col:n,table:S(x),setTo:!x[t][n]};I(o),y(R(o,t,n))}},q=function(e,t,n,o){var r=A(t,n),i=["SECell",o].concat(Object(c.a)(e?[" filled"]:[]));return e&&(i.push("undefined"===typeof x[t-1]?" topMostEdge":x[t-1][n]?"":" topEdge"),i.push("undefined"===typeof x[t+1]?" bottomMostEdge":x[t+1][n]?"":" bottomEdge"),i.push("undefined"===typeof x[t][n-1]?" leftMostEdge":x[t][n-1]?"":" leftEdge"),i.push("undefined"===typeof x[t][n+1]?" rightMostEdge":x[t][n+1]?"":" rightEdge")),Object(D.jsx)("td",{id:r,className:i.join(""),style:L,tabIndex:0,onKeyDown:function(e){return function(e,t,n){var o={ArrowUp:F("up"),ArrowDown:F("down"),ArrowLeft:F("left"),ArrowRight:F("right"),Enter:U,q:F("start"),e:F("end"),w:F("up"),s:F("down"),a:F("left"),d:F("right")," ":U};"function"===typeof o[e.key]&&(e.preventDefault(),e.stopPropagation(),o[e.key]({row:t,col:n}))}(e,t,n)},onFocus:function(e){return function(e,t,n){if(g)return e.preventDefault(),e.stopPropagation(),void(document.getElementById("ScheduleEditorOverlay")&&document.getElementById("ScheduleEditorOverlay").focus());M&&y(R(M,t,n))}(e,t,n)},onMouseDown:function(e){return function(e,t,n){if(e.preventDefault(),!g){var o={row:t,col:n,table:S(x),setTo:!x[t][n]};I(o),y(R(o,t,n))}}(e,t,n)},onMouseMove:function(e){return function(e,t,n){e.preventDefault(),!g&&M&&y(R(M,t,n))}(e,t,n)}},n)};return Object(r.useEffect)((function(){if(x&&!M){console.log("%cSending request to update user's schedule.",T);var e,t={schedule:N((e=x,w(e).flat()))};B.a.post(l+"/user/schedule",t,O(i)).then((function(e){e.data.message||(console.error("Response is missing field response.data.message!"),console.log(e))})).catch((function(e){console.log(e),alert("Bad connection? We couldn't update your schedule, sorry!")}))}}),[x,M,i]),Object(r.useEffect)((function(){x||(console.log("%cSending request to get user's schedule.",T),B.a.get(l+"/user/schedule",O(i)).then((function(e){e.data.schedule?y(k(N(e.data.schedule,!1))):(console.error("Response is missing field response.data.schedule!"),console.log(e))})).catch((function(e){console.log(e),alert("Bad connection? We couldn't get your schedule, sorry!")})))}),[x,i]),Object(r.useEffect)((function(){return document.addEventListener("mouseup",P),document.addEventListener("mouseleave",P),window.addEventListener("click",H),function(){document.removeEventListener("mouseup",P),document.removeEventListener("mouseleave",P),window.removeEventListener("click",H)}}),[P,H]),Object(D.jsx)("div",{id:"ScheduleEditorOuter",children:Object(D.jsxs)("div",{id:"ScheduleEditorInner",className:"shadow paperTexture"+(g?" compressed":" notCompressed"),children:[g&&Object(D.jsx)("button",{id:"ScheduleEditorOverlay",className:"tabHighlightable hasTooltip",onClick:function(e){return H(e,!1)},"data-tooltip":"Expand Editor",onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),e.stopPropagation(),e.shiftKey?document.getElementById("usernameSpan")&&document.getElementById("usernameSpan").focus():document.getElementById("createGroupButton")&&document.getElementById("createGroupButton").focus())}}),Object(D.jsxs)("div",{id:"ScheduleEditorTop",children:[Object(D.jsx)("p",{children:"Click and drag to toggle."}),Object(D.jsx)("span",{id:"Unavailable",children:"Unavailable"}),Object(D.jsx)("span",{id:"Available",children:"Available"}),Object(D.jsx)("br",{}),Object(D.jsx)("p",{children:"Times are displayed in your local timezone, UTC"+(G>0?"+"+G:G)+"."}),Object(D.jsx)("br",{}),Object(D.jsx)("table",{id:"ScheduleEditorHeaders",children:Object(D.jsx)("tbody",{children:Object(D.jsx)("tr",{children:u.slice(0,7).map((function(e,t){return Object(D.jsx)("td",{style:L,children:e.slice(0,3)},t)}))})})})]}),Object(D.jsxs)("div",{id:"ScheduleEditorBottom",children:[Object(D.jsx)("div",{id:"ScheduleEditorTimes",children:Object(c.a)(Array(24).keys()).map((function(e){var t=e%12?e%12:12,n=" "+(e<12?"am":"pm");return Object(D.jsx)("div",{className:"ScheduleEditorTimesCell",children:Object(D.jsx)("span",{className:"ScheduleEditorTimesContent"+(t%3?" hideWhenCompressed":" notHideWhenCompressed"),children:t+":00"+n})},e)}))}),Object(D.jsxs)("div",{id:"ScheduleEditorTableWrapper",children:[(a.pinnedTimes.length>0||a.times.length>0||a.highlightedTime)&&W(a),Object(D.jsx)("div",{id:"ScheduleEditorTableInnerWrapper",children:Object(D.jsx)("table",{id:"ScheduleEditorTable",children:Object(D.jsx)("tbody",{id:"ScheduleEditorTableBody",children:x?x.map((function(e,t){var n=t%4?t%Math.floor(2)?"":" half":" hour";return Object(D.jsx)("tr",{className:"SERow"+n,children:e.map((function(e,o){return q(e,t,o,n)}))},t)})):(n=!0,void Array.from(Array(d),(function(){return new Array(7).fill(n)})))})})})]})]})]})})},q=(n(51),n(8)),z=n(5),K=n(24);n(52),n(53);function V(e){var t=e.mt,n=e.selectedTimes,o=e.setSelectedTimes,r=e.pref,i=e.setPrefs,a=e.loginToken,s=e.isMember,u=e.highestScore,d=e.setGroupRefreshCount,p=function(){return o((function(e){return{times:e.times,pinnedTimes:e.pinnedTimes,highlightedTime:t}}))},g=function(e){e.stopPropagation(),console.log("Pinning",e.type,e.target),o((function(e){var n=void 0===e.pinnedTimes.find((function(e){return e.id===t.id}));console.log("%cSending request to update user's pin on meeting time "+t.id+" to "+n+".",T);var o={meetingTimeId:t.id,updatedIsPinned:n};return B.a.post("".concat(l,"/group/time/pin"),o,O(a)).then((function(e){e.data.message?d(v):(console.error("Response is missing field response.data.message!"),console.log(e))})).catch((function(e){console.log(e)})),{times:e.times,pinnedTimes:n?[t].concat(Object(c.a)(e.pinnedTimes)):e.pinnedTimes.filter((function(e){return e.id!==t.id})),highlightedTime:t}}))},m=function(e){e.stopPropagation();var n=Number(e.target.value);i((function(e){return Object(z.a)(Object(z.a)({},e),{},Object(q.a)({},t.id,n))})),console.log("%cSending request to update user's preference for group "+t.meetingGroupId+".",T);var o={meetingTimeId:t.id,updatedScore:n};B.a.post("".concat(l,"/group/time/score"),o,O(a)).then((function(e){e.data.message?d(v):(console.error("Response is missing field response.data.message!"),console.log(e))})).catch((function(e){console.log(e)}))};return Object(D.jsx)("div",{className:"MeetingTimeCard tabHighlightable",tabIndex:0,onFocus:p,onMouseEnter:p,onClick:g,onKeyDown:function(e){return x(g,e)},children:Object(D.jsxs)("span",{className:"insideTabHighlightable",tabIndex:-1,style:{backgroundColor:u===t.totalPreferenceScore?"honeydew":"white"},children:[Object(D.jsx)("span",{className:"MeetingTimeColor",style:{backgroundColor:j(t.rgb,.75)},children:"undefined"!==typeof n.pinnedTimes.find((function(e){return e.id===t.id}))&&Object(D.jsx)("span",{className:"pinned",children:"P"})}),Object(D.jsx)("span",{className:"MeetingTimeContent",children:I(t.startIndex,t.endIndex)}),s&&Object(D.jsxs)("div",{className:"PreferenceSelection",children:[Object(D.jsxs)("span",{children:[Object(D.jsx)("input",{type:"radio",name:t.id,checked:1===r,value:1,onChange:m,onClick:function(e){return e.stopPropagation()}}),Object(D.jsx)("label",{className:"NotPreferred"})]}),Object(D.jsxs)("span",{children:[Object(D.jsx)("input",{type:"radio",name:t.id,checked:2===r,value:2,onChange:m,onClick:function(e){return e.stopPropagation()}}),Object(D.jsx)("label",{className:"NeutralPreferred"})]}),Object(D.jsxs)("span",{children:[Object(D.jsx)("input",{type:"radio",name:t.id,checked:3===r,value:3,onChange:m,onClick:function(e){return e.stopPropagation()}}),Object(D.jsx)("label",{className:"Preferred"})]})]})]})})}function J(e){var t=e.onClick,n=e.extraClass,o=void 0===n?{}:n,r=e.label,i=e.tooltip,a=void 0===i?"":i,s=e.content,c="MeetingGroupCardButton tabHighlightable "+o;return a&&(c+=" hasTooltip"),Object(D.jsx)("button",{className:c,onClick:t,"aria-label":r,"data-tooltip":a,children:Object(D.jsx)("span",{className:"insideTabHighlightable",children:Object(D.jsx)("span",{className:"MeetingGroupCardButtonContent",children:s})})})}var Y=function(e){var t=e.meetingGroup,n=e.selectedTimes,a=e.setSelectedTimes,s=e.username,u=e.loginToken,d=e.setGroupRefreshCount,p=Object(r.useState)({}),g=Object(o.a)(p,2),h=g[0],b=g[1],f=Object(r.useState)(0),y=Object(o.a)(f,2),C=y[0],S=y[1],w=Object(r.useState)(!0),N=Object(o.a)(w,2),k=N[0],E=N[1],M=t.parentMeetingGroupId||"LOCKED"===t.currentState,I=t.members&&t.members.length>0,G={backgroundColor:t.rgb?j(t.rgb,.75):""};Object(r.useEffect)((function(){if(t.meetingTimes&&t.meetingTimes.length){var e=Math.max.apply(Math,t.meetingTimes.map((function(e){return e.totalPreferenceScore})));S(e)}}),[t]),Object(r.useEffect)((function(){B.a.get("".concat(l,"/group/").concat(t.id,"/time"),O(u)).then((function(e){if(e.data.preferences){var n,o=Object(K.a)(e.data.preferences);try{var r=function(){var e=n.value;b((function(t){return Object(z.a)(Object(z.a)({},t),{},Object(q.a)({},e.meetingTimeId,e.preferenceScore))})),a((function(n){var o=t.meetingTimes.find((function(t){return t.id===e.meetingTimeId})),r=void 0!==n.pinnedTimes.find((function(e){return e.id===o.id}));return e.isPinned&&!r?{times:n.times,pinnedTimes:[o].concat(Object(c.a)(n.pinnedTimes)),highlightedTime:o}:!e.isPinned&&r?{times:n.times,pinnedTimes:n.pinnedTimes.filter((function(e){return e.id!==o.id})),highlightedTime:o}:n}))};for(o.s();!(n=o.n()).done;)r()}catch(i){o.e(i)}finally{o.f()}}else console.error("Response is missing field response.data.preferences!"),console.log(e)}))}),[t,a,u]),Object(r.useEffect)((function(){return function(){return a((function(e){return{times:e.times,pinnedTimes:e.pinnedTimes.filter((function(e){return e.meetingGroupId!==t.id})),highlightedTime:e.highlightedTime}}))}}),[t,a]);var P=function(e){var n=document.getElementById("meetingGroup"+t.id).querySelector(".MeetingGroupCardInnerBottom");n&&!n.contains(e.target)&&a((function(e){return{times:t.meetingTimes,pinnedTimes:e.pinnedTimes,highlightedTime:e.highlightedTime}}))},L=function(e){e.stopPropagation();var n=document.createElement("input");document.body.append(n),n.value="#"+t.joinCode,n.select(),n.setSelectionRange(0,99999),document.execCommand("copy"),n.remove(),document.getElementById("idCopier"+t.joinCode).setAttribute("data-tooltip","Copied!"),setTimeout((function(){document.getElementById("idCopier"+t.joinCode).setAttribute("data-tooltip","Copy Group Code")}),1250)},H=function(e){var n=e.filter((function(e){return e!==s})).map((function(e){return e===t.adminUsername?e+" (admin)":e})).join(", ");if(e.includes(s)){var o=n?"you, ":"just you";return Object(D.jsxs)("span",{children:[Object(D.jsx)("span",{className:"italicized",children:o}),n&&Object(D.jsx)("span",{children:n})]})}return Object(D.jsx)("span",{children:n})};return Object(D.jsxs)("div",{id:"meetingGroup"+t.id,className:"MeetingGroupCard paperTexture shadow",onFocus:P,onMouseOver:P,onMouseLeave:function(){return a((function(e){return{times:[],pinnedTimes:e.pinnedTimes,highlightedTime:null}}))},children:[Object(D.jsxs)("div",{className:"MeetingGroupCardInnerTop",children:[Object(D.jsx)("button",Object(z.a)(Object(z.a)({id:"idCopier"+t.joinCode,className:"idCopier "+(M?"":"hasTooltip"),onClick:L,"data-tooltip":"Copy Group Code",onKeyDown:function(e){x(L,e,"idCopier"+t.joinCode)},tabIndex:0,"aria-label":"Copy Group Code"},M?{"aria-disabled":!0,disabled:!0}:{}),{},{children:Object(D.jsxs)("span",{className:"insideTabHighlightable",children:[Object(D.jsx)("span",{className:"idCopierColor",style:G}),Object(D.jsx)("span",{className:"idCopierContent",children:M?"locked.":"#"+t.joinCode})]})})),Object(D.jsx)("span",{className:"MeetingGroupCardName",children:t.name}),Object(D.jsxs)("div",{className:"MeetingGroupCardButtonWrapper",children:[t.adminUsername===s&&"OPEN"===t.currentState&&Object(D.jsx)(J,{onClick:function(){t.members&&0===t.members.length?alert("You can't lock a meeting group that has no members!"):window.confirm("Would you like to lock this group? Note that users will no longer be able to join!")&&(console.log("%cSending request to lock group "+t.id+".",T),B.a.post("".concat(l,"/group/").concat(t.id,"/lock"),null,O(u)).then((function(e){e.data.message?d(v):(console.error("Response is missing field response.data.message!"),console.log(e))})).catch((function(e){console.log(e),d(v)})))},content:"Lock",label:"Lock Group",tooltip:"Lock Group"}),t.isMember&&Object(D.jsx)(J,{onClick:function(){window.confirm("Would you like to leave this group? You will also leave this group's parent group (if exists) and this group's subgroups (if any)!")&&(console.log("%cSending request to leave group "+t.id+".",T),B.a.post("".concat(l,"/group/").concat(t.joinCode,"/leave"),null,O(u)).then((function(e){e.data.message?d(v):(console.error("Response is missing field response.data.message!"),console.log(e))})).catch((function(e){console.log(e),d(v)})))},content:"Leave",label:"Leave Group",tooltip:"Leave Group"}),t.adminUsername===s&&Object(D.jsx)(J,{onClick:function(){window.confirm("Would you like to delete this group? Doing so will delete this group's subgroups (if any)! ")&&(console.log("%cSending request to delete group "+t.id+".",T),B.a.delete("".concat(l,"/group/").concat(t.id),O(u)).then((function(e){e.data.message?d(v):(console.error("Response is missing field response.data.message!"),console.log(e))})).catch((function(e){console.log(e),d(v)})))},content:"Delete",label:"Delete Group",tooltip:"Delete Group"})]})]}),Object(D.jsxs)("div",{className:"MeetingDuration MeetingGroupCardInnerMiddle",children:[Object(D.jsx)("span",{className:"semiBold MeetingGroupCardInnerMiddleLabel",children:"Meeting duration:"}),Object(D.jsx)("span",{children:m(t.meetingDurationMinutes)})]}),t.subgroupSize>0&&Object(D.jsxs)("div",{className:"SubgroupSize MeetingGroupCardInnerMiddle",children:[Object(D.jsx)("span",{className:"semiBold MeetingGroupCardInnerMiddleLabel",children:"Subgroup size:"}),Object(D.jsx)("span",{children:t.subgroupSize})]}),Object(D.jsxs)("div",{className:"Members MeetingGroupCardInnerMiddle",children:[Object(D.jsx)("span",{className:"semiBold MeetingGroupCardInnerMiddleLabel",children:"Members ("+t.members.length+"):"}),I?Object(D.jsx)(i.a.Fragment,{children:t.members.length>4?Object(D.jsxs)("button",{className:"MembersList cursorPointer hasTooltip","data-tooltip":k?"Expand Member List":"Collapse Member List",onClick:function(){return E((function(e){return!e}))},children:[H(k?t.members.slice(0,3):t.members),k&&Object(D.jsx)("span",{children:", ... (click for more)"})]}):Object(D.jsx)("span",{className:"MembersList",children:H(t.members)})}):Object(D.jsx)("span",{className:"NoMembers",children:"...none!"})]}),t.meetingTimes&&t.meetingTimes.length>0&&Object(D.jsx)("div",{className:"MeetingGroupCardInnerBottom",onMouseEnter:function(){return a((function(e){return{times:[],pinnedTimes:e.pinnedTimes,highlightedTime:e.highlightedTime}}))},onMouseLeave:function(){return a((function(e){return{times:e.times,pinnedTimes:e.pinnedTimes,highlightedTime:null}}))},children:Object(D.jsx)("div",{className:"MeetingTimeCardsWrapper",children:t.meetingTimes.map((function(e,o){return Object(D.jsx)(V,{mt:e,pref:h[e.id],setPrefs:b,selectedTimes:n,setSelectedTimes:a,isMember:t.isMember,loginToken:u,highestScore:C,setGroupRefreshCount:d},o)}))})})]})};var Z=function(e){var t=e.meetingGroups,n=e.selectedTimes,o=e.setSelectedTimes,r=e.username,i=e.loginToken,a=e.setGroupRefreshCount;return Object(D.jsx)("div",{className:"MeetingGroupsViewOuter",children:Object(D.jsx)("div",{className:"MeetingGroupsView",children:t.slice(0).reverse().map((function(e,t){return Object(D.jsx)(Y,{meetingGroup:e,selectedTimes:n,setSelectedTimes:o,username:r,loginToken:i,setGroupRefreshCount:a},t)}))})})};n(22),n(54);var $=function(e){var t=e.id,n=e.label,o=e.placeholder,r=e.extraClass,i=void 0===r?"":r,a=e.type,s=e.value,c=e.onChangeFunc,l=e.extraLabelAttrs,u=void 0===l?{}:l,d=e.extraAttrs,p=void 0===d?{}:d;return Object(D.jsxs)("div",{className:"TextBox "+i,children:[Object(D.jsx)("label",Object(z.a)(Object(z.a)({htmlFor:t},u),{},{children:n})),Object(D.jsx)("input",Object(z.a)({id:t,className:"TextBoxInput",type:a,step:"any",placeholder:o,required:!0,"aria-required":!0,autoComplete:"off",onChange:function(e){return c(e.target.value)},value:s},p))]})};var Q=function(e){var t=e.loginToken,n=e.setGroupRefreshCount,i=e.setCreateGroupPanelOpen,a=Object(r.useState)(""),s=Object(o.a)(a,2),c=s[0],u=s[1],d=Object(r.useState)("60"),p=Object(o.a)(d,2),g=p[0],m=p[1],h=Object(r.useState)(""),f=Object(o.a)(h,2),j=f[0],x=f[1],S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!t&&document.getElementById("CreateGroupPanel").contains(e.target)||(e.preventDefault(),e.stopPropagation(),i(!1))};return Object(D.jsx)("div",{id:"CreateGroupView",onClick:S,children:Object(D.jsxs)("form",{id:"CreateGroupPanel",className:"Panel paperTexture biggestShadow",onSubmit:function(e){e.preventDefault(),e.stopPropagation();var o=15*Math.ceil(g/15);if(o===parseInt(g)||(console.log(o),console.log(g),window.confirm("It seems that you set your meeting duration to "+g+" minutes. Is it okay if we round that up to "+o+" minutes?")))if(c.length<2)alert(y(c.length,2,"group name"));else if(c.length>100)alert(C(c.length,100,"group name"));else{console.log("%cSending request to create new meeting group.",T);var r={name:c,meetingDurationMinutes:o,subgroupSize:j||0,rgb:b(P(0,255),P(0,255),P(0,255))};B.a.post(l+"/group",r,O(t)).then((function(e){e.data.joinCode?(n(v),i(!1)):(console.error("Response is missing field response.data.joinCode!"),console.log(e))})).catch((function(e){console.log(e),alert("Failed to create group!")}))}else alert("Alright, no rounding; so please edit your input!")},children:[Object(D.jsx)("div",{className:"PanelHeader",children:"Create a Meeting Group"}),Object(D.jsx)("div",{className:"PanelSubheader",children:"You will be the admin of this group."}),Object(D.jsx)($,{label:"Meeting Group Name:",placeholder:"e.g. Science Project Meeting",extraClass:"longer",type:"text",extraAttrs:{id:"jsTarget1",autoFocus:!0,onKeyDown:function(e){e.shiftKey&&"Tab"===e.key&&(e.preventDefault(),document.getElementById("jsTarget2").focus())}},value:c,onChangeFunc:u}),Object(D.jsx)($,{label:"Meeting Duration (in minutes):",placeholder:"meeting duration",extraClass:"longer",type:"number",value:g,onChangeFunc:m}),Object(D.jsx)("div",{className:"PanelText PanelDivider",children:"Note: The following is only for meeting groups to be split into subgroups! Leave empty if not applicable."}),Object(D.jsx)($,{label:"Size per Subgroup (optional):",placeholder:"e.g. 2, for pairs (optional)",extraClass:"longer",type:"number",value:j,extraAttrs:{min:2,step:1,required:!1,"aria-required":!1},onChangeFunc:x}),Object(D.jsxs)("div",{className:"panelButtonsWrapper longer",children:[Object(D.jsx)("button",{className:"panelButtons tabHighlightable",type:"button","aria-label":"Cancel",onClick:function(e){return S(e,!0)},children:Object(D.jsx)("span",{className:"insideTabHighlightable",children:"Cancel"})}),Object(D.jsx)("button",{id:"jsTarget2",className:"panelButtons tabHighlightable",type:"submit","aria-label":"Create Meeting Group",onKeyDown:function(e){e.shiftKey||"Tab"!==e.key||(e.preventDefault(),document.getElementById("jsTarget1").focus())},children:Object(D.jsx)("span",{className:"insideTabHighlightable",children:"Create Meeting Group"})})]})]})})},X=new RegExp("^[A-Z\\d]{6}$","i"),_=new RegExp("^#([A-Z\\d]{6})$","i");var ee=function(e){var t=e.username,n=e.setUsername,i=e.loginToken,a=e.setLoginToken,s=Object(r.useState)({times:[],pinnedTimes:[],highlightedTime:null}),u=Object(o.a)(s,2),d=u[0],p=u[1],g=Object(r.useState)([]),m=Object(o.a)(g,2),h=m[0],b=m[1],f=Object(r.useState)(0),j=Object(o.a)(f,2),y=j[0],C=j[1],S=Object(r.useState)(!1),w=Object(o.a)(S,2),N=w[0],k=w[1],E=function(e){e.stopPropagation(),e.preventDefault(),window.confirm("Would you like to log out?")&&(n(""),a(""))};return Object(r.useEffect)((function(){var e=setInterval((function(){C(v)}),5e3);return function(){clearInterval(e)}}),[C]),Object(r.useEffect)((function(){B.a.get(l+"/user/groups",O(i)).then((function(e){e.data.groups?b(function(e,t){var n=function(e){return(e-(new Date).getTimezoneOffset()/60*4+672)%672};return e.map((function(e){return e.meetingTimes=e.meetingTimes.map((function(t){return t.startIndex=n(t.startIndex),t.endIndex=n(t.endIndex),t.groupName=e.name,t.groupRgb=e.rgb,t.rgb&&"#FFFFFF"!==t.rgb||(t.rgb=e.rgb),t})),e.members.includes(t)&&(e.members=[t].concat(Object(c.a)(e.members.filter((function(e){return e!==t}))))),e}))}(e.data.groups,t)):(console.error("Response is missing field response.data.groups!"),console.log(e))})).catch((function(e){console.log(e)}))}),[y,i,t]),Object(D.jsxs)("div",{id:"UserView",children:[N&&Object(D.jsx)(Q,{loginToken:i,setGroupRefreshCount:C,setCreateGroupPanelOpen:k}),Object(D.jsx)("div",{id:"UserViewUpper",children:Object(D.jsxs)("h2",{id:"UserViewUpperText",className:"noSelect",children:[Object(D.jsx)("span",{children:"Hello, "}),Object(D.jsx)("button",{id:"usernameSpan",className:"tabHighlightable",tabIndex:0,onClick:E,onKeyDown:function(e){return x(E,e)},children:Object(D.jsx)("span",{className:"insideTabHighlightable",children:t})}),Object(D.jsx)("span",{children:"!"})]})}),Object(D.jsxs)("div",{id:"UserViewLower",children:[Object(D.jsxs)("div",{className:"Wrapper",children:[Object(D.jsx)("div",{className:"WrapperHeader noSelect",children:Object(D.jsxs)("h3",{children:[" ","Weekly Schedule"," "]})}),Object(D.jsx)(U,{loginToken:i,selectedTimes:d})]}),Object(D.jsxs)("div",{className:"Wrapper",children:[Object(D.jsxs)("div",{className:"WrapperHeader noSelect",children:[Object(D.jsxs)("h3",{children:[" ","Meeting Groups"," "]}),Object(D.jsx)("button",{id:"createGroupButton","aria-label":"Create a New Group",className:"WrapperHeaderButton paperTexture shadow tabHighlightable",onClick:function(e){e.preventDefault(),e.stopPropagation(),k(!0)},children:Object(D.jsxs)("span",{className:"insideTabHighlightable hasTooltip","data-tooltip":"Create a New Group",children:[Object(D.jsx)("span",{id:"plus",children:"+"}),Object(D.jsx)("span",{id:"createGroupText",children:"Create"})]})}),Object(D.jsx)("button",{id:"joinGroupButton","aria-label":"Join a Group By Its Id",className:"WrapperHeaderButton paperTexture shadow tabHighlightable",onClick:function(e){e.preventDefault(),e.stopPropagation();var t="e.g. #"+function(e){for(var t=[];e>0;)t.push(Math.random()<.5?P(0,9):"QWERTYUPASDFGHJKLZXCVBNM"[P(0,23)]),e--;return t.join("")}(6),n=prompt("What's the ID of the group you'd like to join?",t);if(n)if(n!==t&&0!==n.trim().length){n.trim().match(X)&&window.confirm("Did you mean: #"+n.trim()+"?")&&(n="#"+n.trim());var o=n.match(_);o&&2===o.length?h.find((function(e){return e.joinCode===o[1]&&e.isMember}))?alert("...Hey! You're already a member of that group!"):(console.log("%cSending request to join group #"+o[1]+".",T),B.a.post("".concat(l,"/group/").concat(o[1],"/join"),null,O(i)).then((function(e){e.data.message?C(v):(console.error("Response is missing field response.data.message!"),console.log(e))})).catch((function(e){console.log(e),alert("Failed to join group!")}))):alert("Whoops! Your group ID should be formatted as a hex (#) followed by 6 alphanumeric characters.")}else alert("Hmm, it seems like you didn't provide any group ID.")},children:Object(D.jsxs)("span",{className:"insideTabHighlightable hasTooltip","data-tooltip":"Join a Group By Its Id",children:[Object(D.jsx)("span",{id:"plus",children:"+"}),Object(D.jsx)("span",{id:"joinGroupText",children:"Join"})]})})]}),Object(D.jsx)(Z,{meetingGroups:h,selectedTimes:d,setSelectedTimes:p,username:t,loginToken:i,setGroupRefreshCount:C})]})]})]})},te=["Welcome back!","Hey there! (\u261e\uff9f\u30ee\uff9f)\u261e","Howdy. \u1555(\u141b)\u1557","Hello again!"],ne="Please log in below:",oe=["A new user?","Pleased to meet ya!","Signing up? :P","New phone, who dis?"];var re=function(e){var t=e.setUsername,n=e.setLoginToken,i=Object(r.useState)(te[P(0,3)]),a=Object(o.a)(i,2),s=a[0],c=a[1],u=Object(r.useState)(ne),d=Object(o.a)(u,2),p=d[0],g=d[1],m=Object(r.useState)(""),h=Object(o.a)(m,2),b=h[0],f=h[1],j=Object(r.useState)(""),O=Object(o.a)(j,2),v=O[0],x=O[1],S=Object(r.useState)(!1),w=Object(o.a)(S,2),N=w[0],k=w[1];return Object(D.jsx)("div",{id:"LoginView",children:Object(D.jsxs)("form",{className:"Panel paperTexture biggerShadow",onSubmit:function(e){var o,r,i;if(e.preventDefault(),e.stopPropagation(),N){if(b.length<2)return void alert(y(b.length,2,"username"));if(b.length>20)return void alert(C(b.length,20,"username"));if(v.length<2)return void alert(y(v.length,2,"password"));if(v.length>20)return void alert(C(v.length,20,"password"));console.log('%cSending request to register new user "'+b+'".',T),o=l+"/auth/register",r={username:b,password:v},i="That username is already taken!"}else console.log('%cSending request to login as user "'+b+'".',T),o=l+"/auth/login",r={name:"name",username:b,password:v},i="Incorrect login details!";B.a.post(o,r).then((function(e){"string"===typeof e.data.token?(n(e.data.token),t(e.data.username)):(console.error("Response is missing field response.data.token!"),console.log(e))})).catch((function(e){console.log(e),alert(i)}))},autoComplete:"off",children:[Object(D.jsx)("div",{className:"PanelHeader",children:s}),Object(D.jsx)("div",{className:"PanelSubheader",children:p}),Object(D.jsx)($,{label:"Username:",placeholder:"username",type:"text",extraAttrs:{autoFocus:!0,minLength:2,maxLength:20},value:b,onChangeFunc:f}),Object(D.jsx)($,{label:"Password:",placeholder:"password",type:"password",extraAttrs:{minLength:2,maxLength:20},value:v,onChangeFunc:x}),Object(D.jsxs)("div",{className:"panelButtonsWrapper",children:[Object(D.jsx)("button",{className:"panelButtons tabHighlightable",type:"button","aria-label":N?"Return to Login Screen":"Go To Signup Screen",onClick:function(){N?(c(te[P(0,te.length-1)]),g(ne),k(!1)):(c(oe[P(0,oe.length-1)]),g("Enter your details to create a new account:"),k(!0))},children:Object(D.jsx)("span",{className:"insideTabHighlightable",children:N?"Return to Login Screen":"New User? Register here!"})}),Object(D.jsx)("button",{className:"panelButtons tabHighlightable",type:"submit","aria-label":N?"Register":"Login",children:Object(D.jsx)("span",{className:"insideTabHighlightable",children:N?"Register":"Login"})})]})]})})},ie=n(58),ae=n(57);function se(){var e=Object(ie.a)(["token","username"]),t=Object(o.a)(e,2),n=t[0],i=t[1],a=n.token,s=n.username;return Object(r.useEffect)((function(){document.title=s?"Hello, "+s+"!":"Login"}),[s]),a?Object(D.jsx)(ee,{username:s,setUsername:function(e){return i("username",e)},loginToken:a,setLoginToken:function(e){return i("token",e)}}):Object(D.jsx)(re,{setUsername:function(e){return i("username",e)},setLoginToken:function(e){return i("token",e)}})}s.a.render(Object(D.jsx)(ae.a,{children:Object(D.jsx)(se,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.153c6ecd.chunk.js.map